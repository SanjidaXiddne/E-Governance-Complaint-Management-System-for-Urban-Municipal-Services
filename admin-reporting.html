<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reports - Admin Portal</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="dashboard.css" />
    <style>
      .chart-container {
        position: relative;
        height: 350px;
        width: 100%;
      }
      .stat-mini {
        padding: 1rem;
        border-radius: 12px;
        background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      }
      .trend-up {
        color: #10b981;
      }
      .trend-down {
        color: #ef4444;
      }
      .chart-legend {
        display: flex;
        justify-content: center;
        gap: 1.5rem;
        margin-top: 1rem;
      }
      .legend-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.85rem;
        color: #64748b;
      }
      .legend-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
      }
      .date-range-btn {
        border-radius: 20px;
        padding: 0.375rem 1rem;
        font-size: 0.85rem;
        transition: all 0.2s ease;
      }
      .date-range-btn.active {
        background: #3b82f6;
        color: white;
        border-color: #3b82f6;
      }
    </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg fixed-top dashboard-nav">
      <div class="container-fluid px-4">
        <a
          class="navbar-brand d-flex align-items-center"
          href="admin-dashboard.html"
        >
          <img
            src="images/govt.png"
            alt="Logo"
            width="32"
            height="32"
            class="me-2"
          />
          Admin Portal
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#adminNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="adminNav">
          <ul class="navbar-nav ms-auto align-items-center">
            <li class="nav-item">
              <a class="nav-link" href="admin-dashboard.html">
                <i class="fas fa-chart-pie"></i> Overview
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="admin-user-management.html">
                <i class="fas fa-users-cog"></i> Users
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="admin-reporting.html">
                <i class="fas fa-file-invoice"></i> Reports
              </a>
            </li>
            <li class="nav-item ms-lg-3">
              <div class="d-flex align-items-center">
                <div class="user-avatar bg-danger text-white me-2">AD</div>
                <div class="d-none d-lg-block">
                  <div class="small fw-bold">Administrator</div>
                </div>
              </div>
            </li>
            <li class="nav-item ms-3">
              <button class="btn btn-outline-danger btn-sm" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i>
              </button>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
      <div class="container-fluid px-4">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h4 class="fw-bold mb-0">System Reports</h4>
          <div class="d-flex gap-2">
            <div class="btn-group" role="group">
              <button
                type="button"
                class="btn btn-outline-secondary date-range-btn"
                onclick="updateChartRange('7days')"
              >
                7 Days
              </button>
              <button
                type="button"
                class="btn btn-outline-secondary date-range-btn active"
                onclick="updateChartRange('30days')"
              >
                30 Days
              </button>
              <button
                type="button"
                class="btn btn-outline-secondary date-range-btn"
                onclick="updateChartRange('90days')"
              >
                90 Days
              </button>
            </div>
            <button class="btn btn-primary btn-sm" onclick="exportReport()">
              <i class="fas fa-download me-2"></i>Export PDF
            </button>
          </div>
        </div>

        <!-- Quick Stats Row -->
        <div class="row g-3 mb-4">
          <div class="col-md-3">
            <div class="stat-mini">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <div class="small text-muted">Total Complaints</div>
                  <div class="fs-4 fw-bold" id="totalComplaints">1,247</div>
                </div>
                <div class="trend-up small fw-medium">
                  <i class="fas fa-arrow-up me-1"></i>12%
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="stat-mini">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <div class="small text-muted">Resolved</div>
                  <div
                    class="fs-4 fw-bold text-success"
                    id="resolvedComplaints"
                  >
                    892
                  </div>
                </div>
                <div class="trend-up small fw-medium">
                  <i class="fas fa-arrow-up me-1"></i>8%
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="stat-mini">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <div class="small text-muted">In Progress</div>
                  <div
                    class="fs-4 fw-bold text-warning"
                    id="inProgressComplaints"
                  >
                    287
                  </div>
                </div>
                <div class="trend-down small fw-medium">
                  <i class="fas fa-arrow-down me-1"></i>3%
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="stat-mini">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <div class="small text-muted">Avg. Resolution Time</div>
                  <div class="fs-4 fw-bold text-info" id="avgResolutionTime">
                    3.2 days
                  </div>
                </div>
                <div class="trend-up small fw-medium">
                  <i class="fas fa-arrow-down me-1"></i>15%
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row g-4">
          <!-- Complaint Volume Trends Chart -->
          <div class="col-lg-8">
            <div class="card border-0 shadow-sm h-100">
              <div class="card-header bg-white border-bottom p-3">
                <div class="d-flex justify-content-between align-items-center">
                  <h6 class="fw-bold mb-0">
                    <i class="fas fa-chart-line text-primary me-2"></i>Complaint
                    Volume Trends
                  </h6>
                  <div class="dropdown">
                    <button
                      class="btn btn-sm btn-outline-secondary dropdown-toggle"
                      type="button"
                      data-bs-toggle="dropdown"
                    >
                      <i class="fas fa-filter me-1"></i>Filter
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                      <li>
                        <a
                          class="dropdown-item"
                          href="#"
                          onclick="filterChart('all')"
                          >All Categories</a
                        >
                      </li>
                      <li>
                        <a
                          class="dropdown-item"
                          href="#"
                          onclick="filterChart('road')"
                          >Road & Potholes</a
                        >
                      </li>
                      <li>
                        <a
                          class="dropdown-item"
                          href="#"
                          onclick="filterChart('water')"
                          >Water Supply</a
                        >
                      </li>
                      <li>
                        <a
                          class="dropdown-item"
                          href="#"
                          onclick="filterChart('waste')"
                          >Waste Management</a
                        >
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="card-body p-4">
                <div class="chart-container">
                  <canvas id="complaintVolumeTrendsChart"></canvas>
                </div>
                <div class="chart-legend">
                  <div class="legend-item">
                    <div class="legend-dot" style="background: #3b82f6"></div>
                    <span>Complaints Received</span>
                  </div>
                  <div class="legend-item">
                    <div class="legend-dot" style="background: #10b981"></div>
                    <span>Complaints Resolved</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Category Breakdown -->
          <div class="col-lg-4">
            <div class="card border-0 shadow-sm h-100">
              <div class="card-header bg-white border-bottom p-3">
                <h6 class="fw-bold mb-0">
                  <i class="fas fa-chart-pie text-primary me-2"></i>Complaints
                  by Category
                </h6>
              </div>
              <div class="card-body p-4">
                <div class="chart-container" style="height: 220px">
                  <canvas id="categoryPieChart"></canvas>
                </div>
                <div class="mt-4">
                  <div class="mb-3">
                    <div class="d-flex justify-content-between mb-1">
                      <span class="small fw-medium">
                        <span
                          class="legend-dot d-inline-block me-2"
                          style="
                            background: #f59e0b;
                            width: 10px;
                            height: 10px;
                            border-radius: 50%;
                          "
                        ></span>
                        Road & Potholes
                      </span>
                      <span class="small text-muted">562 (45%)</span>
                    </div>
                    <div class="progress" style="height: 6px">
                      <div
                        class="progress-bar"
                        style="width: 45%; background: #f59e0b"
                      ></div>
                    </div>
                  </div>
                  <div class="mb-3">
                    <div class="d-flex justify-content-between mb-1">
                      <span class="small fw-medium">
                        <span
                          class="legend-dot d-inline-block me-2"
                          style="
                            background: #3b82f6;
                            width: 10px;
                            height: 10px;
                            border-radius: 50%;
                          "
                        ></span>
                        Water Supply
                      </span>
                      <span class="small text-muted">374 (30%)</span>
                    </div>
                    <div class="progress" style="height: 6px">
                      <div
                        class="progress-bar"
                        style="width: 30%; background: #3b82f6"
                      ></div>
                    </div>
                  </div>
                  <div class="mb-3">
                    <div class="d-flex justify-content-between mb-1">
                      <span class="small fw-medium">
                        <span
                          class="legend-dot d-inline-block me-2"
                          style="
                            background: #10b981;
                            width: 10px;
                            height: 10px;
                            border-radius: 50%;
                          "
                        ></span>
                        Waste Management
                      </span>
                      <span class="small text-muted">187 (15%)</span>
                    </div>
                    <div class="progress" style="height: 6px">
                      <div
                        class="progress-bar"
                        style="width: 15%; background: #10b981"
                      ></div>
                    </div>
                  </div>
                  <div>
                    <div class="d-flex justify-content-between mb-1">
                      <span class="small fw-medium">
                        <span
                          class="legend-dot d-inline-block me-2"
                          style="
                            background: #6b7280;
                            width: 10px;
                            height: 10px;
                            border-radius: 50%;
                          "
                        ></span>
                        Others
                      </span>
                      <span class="small text-muted">124 (10%)</span>
                    </div>
                    <div class="progress" style="height: 6px">
                      <div
                        class="progress-bar bg-secondary"
                        style="width: 10%"
                      ></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Resolution Time Chart -->
          <div class="col-lg-6">
            <div class="card border-0 shadow-sm">
              <div class="card-header bg-white border-bottom p-3">
                <h6 class="fw-bold mb-0">
                  <i class="fas fa-clock text-primary me-2"></i>Resolution Time
                  by Category
                </h6>
              </div>
              <div class="card-body p-4">
                <div class="chart-container" style="height: 280px">
                  <canvas id="resolutionTimeChart"></canvas>
                </div>
              </div>
            </div>
          </div>

          <!-- Status Distribution Chart -->
          <div class="col-lg-6">
            <div class="card border-0 shadow-sm">
              <div class="card-header bg-white border-bottom p-3">
                <h6 class="fw-bold mb-0">
                  <i class="fas fa-tasks text-primary me-2"></i>Status
                  Distribution
                </h6>
              </div>
              <div class="card-body p-4">
                <div class="chart-container" style="height: 280px">
                  <canvas id="statusDistributionChart"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <!-- Date adapter for time scale -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>

    <script>
      // ============================================
      // COMPLAINT DATA - Simulated Dataset
      // ============================================

      // Generate realistic complaint data for the last 30 days
      function generateComplaintData(days = 30) {
        const data = [];
        const today = new Date();

        for (let i = days - 1; i >= 0; i--) {
          const date = new Date(today);
          date.setDate(date.getDate() - i);

          // Simulate realistic complaint counts with some variance
          // Higher on weekdays, lower on weekends
          const dayOfWeek = date.getDay();
          const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;

          const baseReceived = isWeekend ? 25 : 45;
          const baseResolved = isWeekend ? 20 : 38;

          // Add random variance
          const received = baseReceived + Math.floor(Math.random() * 20) - 10;
          const resolved = Math.min(
            received,
            baseResolved + Math.floor(Math.random() * 15) - 7
          );

          data.push({
            date: date.toISOString().split("T")[0], // Format: YYYY-MM-DD
            dateObj: date,
            complaintsReceived: Math.max(10, received),
            complaintsResolved: Math.max(5, resolved),
          });
        }

        return data;
      }

      // Store the dataset globally
      let complaintDataset = generateComplaintData(30);
      let volumeTrendsChart = null;
      let categoryPieChart = null;
      let resolutionTimeChart = null;
      let statusDistributionChart = null;

      // ============================================
      // CHART INITIALIZATION
      // ============================================

      document.addEventListener("DOMContentLoaded", function () {
        initializeVolumeChart();
        initializeCategoryPieChart();
        initializeResolutionTimeChart();
        initializeStatusDistributionChart();
      });

      // Main Complaint Volume Trends Chart
      function initializeVolumeChart() {
        const ctx = document.getElementById("complaintVolumeTrendsChart");

        if (!ctx) {
          console.error("Chart canvas element not found");
          return;
        }

        // Map dataset to chart format
        const labels = complaintDataset.map((item) => item.date);
        const receivedData = complaintDataset.map(
          (item) => item.complaintsReceived
        );
        const resolvedData = complaintDataset.map(
          (item) => item.complaintsResolved
        );

        // Destroy existing chart if it exists
        if (volumeTrendsChart) {
          volumeTrendsChart.destroy();
        }

        volumeTrendsChart = new Chart(ctx, {
          type: "line",
          data: {
            labels: labels, // X-axis: Date field
            datasets: [
              {
                label: "Complaints Received",
                data: receivedData, // Y-axis: Complaint counts
                borderColor: "#3b82f6",
                backgroundColor: "rgba(59, 130, 246, 0.1)",
                borderWidth: 3,
                fill: true,
                tension: 0.4,
                pointRadius: 4,
                pointBackgroundColor: "#3b82f6",
                pointBorderColor: "#ffffff",
                pointBorderWidth: 2,
                pointHoverRadius: 6,
                pointHoverBackgroundColor: "#3b82f6",
                pointHoverBorderColor: "#ffffff",
                pointHoverBorderWidth: 3,
              },
              {
                label: "Complaints Resolved",
                data: resolvedData, // Y-axis: Complaint counts
                borderColor: "#10b981",
                backgroundColor: "rgba(16, 185, 129, 0.1)",
                borderWidth: 3,
                fill: true,
                tension: 0.4,
                pointRadius: 4,
                pointBackgroundColor: "#10b981",
                pointBorderColor: "#ffffff",
                pointBorderWidth: 2,
                pointHoverRadius: 6,
                pointHoverBackgroundColor: "#10b981",
                pointHoverBorderColor: "#ffffff",
                pointHoverBorderWidth: 3,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            interaction: {
              mode: "index",
              intersect: false,
            },
            plugins: {
              legend: {
                display: false, // Using custom legend
              },
              tooltip: {
                backgroundColor: "rgba(15, 23, 42, 0.9)",
                titleColor: "#ffffff",
                bodyColor: "#e2e8f0",
                borderColor: "rgba(255, 255, 255, 0.1)",
                borderWidth: 1,
                cornerRadius: 8,
                padding: 12,
                displayColors: true,
                callbacks: {
                  title: function (context) {
                    const date = new Date(context[0].label);
                    return date.toLocaleDateString("en-US", {
                      weekday: "short",
                      month: "short",
                      day: "numeric",
                      year: "numeric",
                    });
                  },
                  label: function (context) {
                    return ` ${context.dataset.label}: ${context.parsed.y} complaints`;
                  },
                },
              },
            },
            scales: {
              x: {
                type: "category", // Using category scale for date strings
                title: {
                  display: true,
                  text: "Date",
                  color: "#64748b",
                  font: {
                    size: 12,
                    weight: "500",
                  },
                },
                grid: {
                  display: false,
                },
                ticks: {
                  color: "#64748b",
                  maxRotation: 45,
                  minRotation: 45,
                  callback: function (value, index) {
                    // Show every 5th label to avoid crowding
                    if (index % 5 === 0) {
                      const date = new Date(this.getLabelForValue(value));
                      return date.toLocaleDateString("en-US", {
                        month: "short",
                        day: "numeric",
                      });
                    }
                    return "";
                  },
                },
              },
              y: {
                title: {
                  display: true,
                  text: "Number of Complaints",
                  color: "#64748b",
                  font: {
                    size: 12,
                    weight: "500",
                  },
                },
                beginAtZero: true,
                grid: {
                  color: "rgba(0, 0, 0, 0.05)",
                  drawBorder: false,
                },
                ticks: {
                  color: "#64748b",
                  stepSize: 10,
                  callback: function (value) {
                    return value;
                  },
                },
              },
            },
            animation: {
              duration: 1000,
              easing: "easeOutQuart",
            },
          },
        });

        console.log(
          "Volume Trends Chart initialized with",
          complaintDataset.length,
          "data points"
        );
      }

      // Category Pie Chart
      function initializeCategoryPieChart() {
        const ctx = document.getElementById("categoryPieChart");
        if (!ctx) return;

        if (categoryPieChart) {
          categoryPieChart.destroy();
        }

        categoryPieChart = new Chart(ctx, {
          type: "doughnut",
          data: {
            labels: [
              "Road & Potholes",
              "Water Supply",
              "Waste Management",
              "Others",
            ],
            datasets: [
              {
                data: [562, 374, 187, 124],
                backgroundColor: ["#f59e0b", "#3b82f6", "#10b981", "#6b7280"],
                borderColor: "#ffffff",
                borderWidth: 3,
                hoverOffset: 8,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            cutout: "65%",
            plugins: {
              legend: {
                display: false,
              },
              tooltip: {
                backgroundColor: "rgba(15, 23, 42, 0.9)",
                cornerRadius: 8,
                callbacks: {
                  label: function (context) {
                    const total = context.dataset.data.reduce(
                      (a, b) => a + b,
                      0
                    );
                    const percentage = ((context.parsed / total) * 100).toFixed(
                      1
                    );
                    return ` ${context.label}: ${context.parsed} (${percentage}%)`;
                  },
                },
              },
            },
          },
        });
      }

      // Resolution Time Chart
      function initializeResolutionTimeChart() {
        const ctx = document.getElementById("resolutionTimeChart");
        if (!ctx) return;

        if (resolutionTimeChart) {
          resolutionTimeChart.destroy();
        }

        resolutionTimeChart = new Chart(ctx, {
          type: "bar",
          data: {
            labels: [
              "Road & Potholes",
              "Water Supply",
              "Waste Management",
              "Electrical",
              "Sanitation",
              "Others",
            ],
            datasets: [
              {
                label: "Avg. Days to Resolve",
                data: [4.2, 2.8, 1.5, 3.1, 2.2, 3.5],
                backgroundColor: [
                  "rgba(245, 158, 11, 0.8)",
                  "rgba(59, 130, 246, 0.8)",
                  "rgba(16, 185, 129, 0.8)",
                  "rgba(139, 92, 246, 0.8)",
                  "rgba(236, 72, 153, 0.8)",
                  "rgba(107, 114, 128, 0.8)",
                ],
                borderColor: [
                  "#f59e0b",
                  "#3b82f6",
                  "#10b981",
                  "#8b5cf6",
                  "#ec4899",
                  "#6b7280",
                ],
                borderWidth: 2,
                borderRadius: 8,
                borderSkipped: false,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            indexAxis: "y",
            plugins: {
              legend: {
                display: false,
              },
              tooltip: {
                backgroundColor: "rgba(15, 23, 42, 0.9)",
                cornerRadius: 8,
                callbacks: {
                  label: function (context) {
                    return ` Average: ${context.parsed.x} days`;
                  },
                },
              },
            },
            scales: {
              x: {
                title: {
                  display: true,
                  text: "Days",
                  color: "#64748b",
                },
                beginAtZero: true,
                grid: {
                  color: "rgba(0, 0, 0, 0.05)",
                },
                ticks: {
                  color: "#64748b",
                },
              },
              y: {
                grid: {
                  display: false,
                },
                ticks: {
                  color: "#64748b",
                },
              },
            },
          },
        });
      }

      // Status Distribution Chart
      function initializeStatusDistributionChart() {
        const ctx = document.getElementById("statusDistributionChart");
        if (!ctx) return;

        if (statusDistributionChart) {
          statusDistributionChart.destroy();
        }

        statusDistributionChart = new Chart(ctx, {
          type: "doughnut",
          data: {
            labels: ["Resolved", "In Progress", "Pending", "Rejected"],
            datasets: [
              {
                data: [892, 287, 45, 23],
                backgroundColor: ["#10b981", "#f59e0b", "#3b82f6", "#ef4444"],
                borderColor: "#ffffff",
                borderWidth: 3,
                hoverOffset: 8,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            cutout: "55%",
            plugins: {
              legend: {
                position: "bottom",
                labels: {
                  padding: 20,
                  usePointStyle: true,
                  pointStyle: "circle",
                  color: "#64748b",
                  font: {
                    size: 12,
                  },
                },
              },
              tooltip: {
                backgroundColor: "rgba(15, 23, 42, 0.9)",
                cornerRadius: 8,
                callbacks: {
                  label: function (context) {
                    const total = context.dataset.data.reduce(
                      (a, b) => a + b,
                      0
                    );
                    const percentage = ((context.parsed / total) * 100).toFixed(
                      1
                    );
                    return ` ${context.label}: ${context.parsed} (${percentage}%)`;
                  },
                },
              },
            },
          },
        });
      }

      // ============================================
      // CHART UPDATE FUNCTIONS
      // ============================================

      // Update chart based on date range
      function updateChartRange(range) {
        // Update button states
        document.querySelectorAll(".date-range-btn").forEach((btn) => {
          btn.classList.remove("active");
        });
        event.target.classList.add("active");

        // Generate new data based on range
        let days;
        switch (range) {
          case "7days":
            days = 7;
            break;
          case "90days":
            days = 90;
            break;
          default:
            days = 30;
        }

        // Update dataset and re-render chart
        complaintDataset = generateComplaintData(days);
        initializeVolumeChart();

        // Update stats
        updateStats(days);

        console.log(`Chart updated to show ${days} days of data`);
      }

      // Filter chart by category (placeholder)
      function filterChart(category) {
        console.log("Filtering chart by category:", category);
        // In a real implementation, this would filter the data
        showAlert(
          `Filter applied: ${category === "all" ? "All Categories" : category}`,
          "info"
        );
      }

      // Update statistics based on date range
      function updateStats(days) {
        const multiplier = days / 30;
        document.getElementById("totalComplaints").textContent = Math.round(
          1247 * multiplier
        ).toLocaleString();
        document.getElementById("resolvedComplaints").textContent = Math.round(
          892 * multiplier
        ).toLocaleString();
        document.getElementById("inProgressComplaints").textContent =
          Math.round(287 * multiplier).toLocaleString();
      }

      // Export report function
      function exportReport() {
        showAlert(
          "Generating PDF report... This feature will download a comprehensive report.",
          "info"
        );
      }

      // ============================================
      // UTILITY FUNCTIONS
      // ============================================

      function showAlert(message, type = "info") {
        const existingAlert = document.querySelector(".custom-alert");
        if (existingAlert) {
          existingAlert.remove();
        }

        const alertDiv = document.createElement("div");
        const alertClass = type === "error" ? "danger" : type;
        alertDiv.className = `alert alert-${alertClass} alert-dismissible fade show custom-alert`;
        alertDiv.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                z-index: 9999;
                min-width: 300px;
                max-width: 450px;
                border-radius: 12px;
                box-shadow: 0 8px 24px rgba(0,0,0,0.15);
            `;

        const icons = {
          success: "check-circle",
          error: "exclamation-triangle",
          danger: "exclamation-triangle",
          warning: "exclamation-circle",
          info: "info-circle",
        };

        alertDiv.innerHTML = `
                <i class="fas fa-${icons[type] || icons["info"]} me-2"></i>
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;

        document.body.appendChild(alertDiv);

        setTimeout(() => {
          if (alertDiv && alertDiv.parentNode) {
            alertDiv.remove();
          }
        }, 5000);
      }

      function logout() {
        sessionStorage.clear();
        window.location.href = "index.html";
      }
    </script>
  </body>
</html>
